<form name="updateForm" role="form" (ngSubmit)="save()" [formGroup]="updateForm">
  <div class="modal-header">
    <h4 class="modal-title" [hidden]="!isNew" jhiTranslate="taskManagement.modal.newHeader">Create new task</h4>
    <h4 class="modal-title" [hidden]="isNew">{{ 'taskManagement.modal.editHeader' | translate: { taskHeader: taskModel?.header } }}</h4>

    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" (click)="close()">&times;</button>
  </div>
  <div class="modal-body">
    <jhi-alert-error></jhi-alert-error>
    <div class="form-group">
      <label class="form-control-label" for="header" jhiTranslate="taskManagement.fields.header">Header:</label>
      <input type="text" class="form-control" name="header" id="header" formControlName="header" />

      <div *ngIf="updateForm.get('header')!.invalid">
        <small
          class="form-text text-danger"
          *ngIf="updateForm.get('header')?.errors?.required"
          jhiTranslate="taskManagement.error.required"
        >
          This field is required!
        </small>
      </div>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="creator" jhiTranslate="taskManagement.fields.creator">Creator:</label>
      <input type="text" class="form-control" name="creator" id="creator" formControlName="creator" />

      <div *ngIf="updateForm.get('creator')!.invalid">
        <small
          class="form-text text-danger"
          *ngIf="updateForm.get('creator')?.errors?.required"
          jhiTranslate="taskManagement.error.required"
        >
          This field is required!
        </small>
      </div>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="organisationUnit" jhiTranslate="taskManagement.fields.organisationUnit"
        >Organisation unit:</label
      >
      <input type="text" class="form-control" name="organisationUnit" id="organisationUnit" formControlName="organisationUnit" />

      <div *ngIf="updateForm.get('organisationUnit')!.invalid">
        <small
          class="form-text text-danger"
          *ngIf="updateForm.get('organisationUnit')?.errors?.required"
          jhiTranslate="taskManagement.error.required"
        >
          This field is required!
        </small>
      </div>
    </div>
    <div class="form-check">
      <label class="form-check-label" for="privateTask">
        <input class="form-check-input" type="checkbox" name="privateTask" id="privateTask" formControlName="privateTask" />
        <span jhiTranslate="taskManagement.fields.privateTask">Private task</span>
      </label>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="taskDifficulty" jhiTranslate="taskManagement.fields.taskDifficulty">Task difficulty:</label>
      <select class="form-control" name="taskDifficulty" id="taskDifficulty" formControlName="taskDifficulty">
        <option value="" disabled>{{ 'taskManagement.difficultyPlaceholder' | translate }}</option>
        <option *ngFor="let difficulty of difficulties" [ngValue]="difficulty">{{ difficulty.text | translate }}</option>
      </select>

      <div *ngIf="updateForm.get('taskDifficulty')!.invalid">
        <small
          class="form-text text-danger"
          *ngIf="updateForm.get('taskDifficulty')?.errors?.required"
          jhiTranslate="taskManagement.error.required"
        >
          This field is required!
        </small>
      </div>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="taskAssignmentType" jhiTranslate="taskManagement.fields.taskType">Task type:</label>
      <select class="form-control" name="taskAssignmentType" id="taskAssignmentType" formControlName="taskAssignmentType">
        <option value="" disabled>{{ 'taskManagement.taskTypePlaceholder' | translate }}</option>
        <option *ngFor="let taskType of taskTypes" [ngValue]="taskType">{{ taskType.text | translate }}</option>
      </select>

      <div *ngIf="updateForm.get('taskAssignmentType')!.invalid">
        <small
          class="form-text text-danger"
          *ngIf="updateForm.get('taskAssignmentType')?.errors?.required"
          jhiTranslate="taskManagement.error.required"
        >
          This field is required!
        </small>
      </div>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="taskIdForDispatcher" jhiTranslate="taskManagement.fields.taskIdForDispatcher"
        >Task-ID for the Dispatcher:</label
      >
      <input type="text" class="form-control" name="taskIdForDispatcher" id="taskIdForDispatcher" formControlName="taskIdForDispatcher" />
    </div>
    <div class="form-group">
      <label class="form-control-label" for="sqlSchemaName" jhiTranslate="taskManagement.fields.sqlSchema">SQL schema:</label>
      <input type="text" class="form-control" name="sqlSchemaName" id="sqlSchemaName" formControlName="sqlSchemaName" />
    </div>
    <div class="form-group">
      <label class="form-control-label" for="sqlCreateStatements" jhiTranslate="taskManagement.fields.sqlCreateStatements"
        >SQL Create-Table-Statements:</label
      >
      <ngx-monaco-editor [options]="editorOptions" id="sqlCreateStatements" formControlName="sqlCreateStatements"></ngx-monaco-editor>
    </div>
    <div class="form-group">
      <label
        class="form-control-label"
        for="sqlInsertStatementsSubmission"
        jhiTranslate="taskManagement.fields.sqlInsertStatementsSubmission"
        >SQL Insert-Into-Statements (Submission):</label
      >
      <ngx-monaco-editor
        [options]="editorOptions"
        id="sqlInsertStatementsSubmission"
        formControlName="sqlInsertStatementsSubmission"
      ></ngx-monaco-editor>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="sqlInsertStatementsDiagnose" jhiTranslate="taskManagement.fields.sqlInsertStatementsDiagnose"
        >SQL Insert-Into-Statements (Diagnose):</label
      >
      <ngx-monaco-editor
        [options]="editorOptions"
        id="sqlInsertStatementsDiagnose"
        formControlName="sqlInsertStatementsDiagnose"
      ></ngx-monaco-editor>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="sqlSolution" jhiTranslate="taskManagement.fields.sqlSolution">SQL solution:</label>
      <ngx-monaco-editor [options]="editorOptions" id="sqlSolution" formControlName="sqlSolution"></ngx-monaco-editor>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="processingTime" jhiTranslate="taskManagement.fields.processingTime">Processing time:</label>
      <input type="text" class="form-control" name="processingTime" id="processingTime" formControlName="processingTime" />
    </div>
    <div class="form-group">
      <label class="form-control-label" for="url" jhiTranslate="taskManagement.fields.url">Url:</label>
      <input type="url" class="form-control" name="url" id="url" formControlName="url" />

      <div *ngIf="updateForm.get('url')!.invalid">
        <small class="form-text text-danger" *ngIf="updateForm.get('url')?.errors?.pattern" jhiTranslate="taskManagement.error.urlPattern">
          This optional field has to conform the URL standard!
        </small>
      </div>
    </div>
    <div class="form-group">
      <label class="form-control-label" for="instruction" jhiTranslate="taskManagement.fields.instruction">Instructions:</label>
      <quill-editor [placeholder]="''" id="instruction" formControlName="instruction"> </quill-editor>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="close()">
      <fa-icon icon="ban"></fa-icon>&nbsp;<span jhiTranslate="courseManagement.form.cancel">Cancel</span>
    </button>

    <button type="submit" [disabled]="updateForm.invalid || isSaving" class="btn btn-primary">
      <span *ngIf="isSaving" class="spinner-border spinner-border-sm mr-1"></span>
      <fa-icon *ngIf="!isSaving" icon="save"></fa-icon>&nbsp;<span jhiTranslate="courseManagement.form.save">Save</span>
    </button>
  </div>
</form>
